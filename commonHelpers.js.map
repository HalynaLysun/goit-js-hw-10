{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.css\";\n\n\nconst inputEl = document.querySelector('#datetime-picker')\nconst startBtn = document.querySelector('button[data-start]')\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return updateTimer(days, hours, minutes, seconds);\n}\n\nfunction updateTimer(days, hours, minutes, seconds) {\n  const daysEl = document.querySelector('.days')\n  const hoursEl = document.querySelector('.hours')\n  const minutesEl = document.querySelector('.minutes')\n  const secondsEl = document.querySelector('.seconds')\n  \n  daysEl.textContent = String(days).padStart(2, '0')\n  hoursEl.textContent = String(hours).padStart(2, '0')\n  minutesEl.textContent = String(minutes).padStart(2, '0')\n  secondsEl.textContent = String(seconds).padStart(2, '0')\n}\n\nfunction buildErrorMessage() {\n  iziToast.error({\n        title: '',\n        message: 'Please choose a date in the future',\n        class: 'popup-message',\n        theme: 'dark',\n        backgroundColor: '#ef4040',\n        messageColor: '#fff',\n        iconUrl: '../img/bi_x-octagon.svg',\n        position: 'topRight',\n        pauseOnHover: true,\n        timeout: 3000,\n      });    \n}\n\nfunction mobileInputAttribute(state) {\n  const inputEl = document.querySelector('.flatpickr-input.flatpickr-mobile')\n  \n  if (!inputEl) {\n    return\n  }\n  state ? inputEl.setAttribute('disabled' , '') : inputEl.removeAttribute('disabled')\n}\n\nfunction timerHandler(selectedDate, inputEl, startBtn) {\n  startBtn.removeAttribute('disabled')\n  inputEl.removeAttribute('disabled')\n  let interval\n\n  startBtn.addEventListener('click', () => {\n    startBtn.setAttribute('disabled', '')\n    inputEl.setAttribute('disabled', '')\n    mobileInputAttribute(true);\n    \n    interval = setInterval(() => {\n      if ((userSelectedDate - Date.now()) <= 1000) {\n        inputEl.removeAttribute('disabled', '')\n        clearInterval(interval)\n        interval = null\n      }\n      convertMs(selectedDate - Date.now())\n      \n     }, 1000)\n\n  })\n}\n\nlet userSelectedDate\n\nstartBtn.setAttribute('disabled', '')\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  dateFormat: 'Y-m-d h:m',\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0]\n    if (userSelectedDate <= Date.now() || isNaN(userSelectedDate)) {\n      startBtn.setAttribute('disabled', '')\n      buildErrorMessage()\n    } else {\n      timerHandler(userSelectedDate, inputEl, startBtn)\n    }\n  },\n};\n\nflatpickr(inputEl, options);\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["inputEl","startBtn","convertMs","ms","days","hours","minutes","seconds","updateTimer","daysEl","hoursEl","minutesEl","secondsEl","buildErrorMessage","iziToast","mobileInputAttribute","state","timerHandler","selectedDate","interval","userSelectedDate","options","selectedDates","flatpickr"],"mappings":"+IAOA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,oBAAoB,EAE5D,SAASC,EAAUC,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,OAAOK,EAAYJ,EAAMC,EAAOC,EAASC,CAAO,CAClD,CAEA,SAASC,EAAYJ,EAAMC,EAAOC,EAASC,EAAS,CAClD,MAAME,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAU,SAAS,cAAc,QAAQ,EACzCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAY,SAAS,cAAc,UAAU,EAEnDH,EAAO,YAAc,OAAOL,CAAI,EAAE,SAAS,EAAG,GAAG,EACjDM,EAAQ,YAAc,OAAOL,CAAK,EAAE,SAAS,EAAG,GAAG,EACnDM,EAAU,YAAc,OAAOL,CAAO,EAAE,SAAS,EAAG,GAAG,EACvDM,EAAU,YAAc,OAAOL,CAAO,EAAE,SAAS,EAAG,GAAG,CACzD,CAEA,SAASM,GAAoB,CAC3BC,EAAS,MAAM,CACT,MAAO,GACP,QAAS,qCACT,MAAO,gBACP,MAAO,OACP,gBAAiB,UACjB,aAAc,OACd,QAAS,0BACT,SAAU,WACV,aAAc,GACd,QAAS,GACjB,CAAO,CACP,CAEA,SAASC,EAAqBC,EAAO,CACnC,MAAMhB,EAAU,SAAS,cAAc,mCAAmC,EAErEA,IAGLgB,EAAQhB,EAAQ,aAAa,WAAa,EAAE,EAAIA,EAAQ,gBAAgB,UAAU,EACpF,CAEA,SAASiB,EAAaC,EAAclB,EAASC,EAAU,CACrDA,EAAS,gBAAgB,UAAU,EACnCD,EAAQ,gBAAgB,UAAU,EAClC,IAAImB,EAEJlB,EAAS,iBAAiB,QAAS,IAAM,CACvCA,EAAS,aAAa,WAAY,EAAE,EACpCD,EAAQ,aAAa,WAAY,EAAE,EACnCe,EAAqB,EAAI,EAEzBI,EAAW,YAAY,IAAM,CACtBC,EAAmB,KAAK,IAAG,GAAO,MACrCpB,EAAQ,gBAAgB,WAAY,EAAE,EACtC,cAAcmB,CAAQ,EACtBA,EAAW,MAEbjB,EAAUgB,EAAe,KAAK,KAAK,CAEnC,EAAE,GAAI,CAEZ,CAAG,CACH,CAEA,IAAIE,EAEJnB,EAAS,aAAa,WAAY,EAAE,EAEpC,MAAMoB,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,WAAY,YACZ,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAC9BF,GAAoB,KAAK,IAAK,GAAI,MAAMA,CAAgB,GAC1DnB,EAAS,aAAa,WAAY,EAAE,EACpCY,EAAmB,GAEnBI,EAAaG,EAAkBpB,EAASC,CAAQ,CAEnD,CACH,EAEAsB,EAAUvB,EAASqB,CAAO"}