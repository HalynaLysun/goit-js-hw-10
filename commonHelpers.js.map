{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.css\";\n\n\nconst inputEl = document.querySelector('#datetime-picker')\nconst startBtn = document.querySelector('button[data-start]')\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n  },\n};\n\nflatpickr(inputEl, options);\n\n\nclass Timer { \n  constructor({onTick}) {\n    this.onTick = onTick;\n    this.interval = null;\n  }\n\n  start() {\n    const startTime = new Date(inputEl.value)\n    const milliseconds = startTime.getTime()\n    if (milliseconds < Date.now()) {\n      iziToast.error({\n        title: '',\n        message: 'Please choose a date in the future',\n        class: 'popup-message',\n        theme: 'dark',\n        backgroundColor: '#ef4040',\n        messageColor: '#fff',\n        iconUrl: '../img/bi_x-octagon.svg',\n        position: 'topRight',\n        pauseOnHover: true,\n        timeout: 3000,\n      });    \n    } else {\n      this.interval = setInterval(() => {\n        const currentTime = Date.now()\n        const delta = milliseconds - currentTime\n        const time = this.convertMs(delta)\n\n        this.onTick(time)\n\n      if (delta <= 0) {\n      clearInterval(this.interval);\n      }\n      }, 1000)\n    }\n  }\n\n    convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n  }\n}\n\nconst daysEl = document.querySelector('.days')\nconst hoursEl = document.querySelector('.hours')\nconst minutesEl = document.querySelector('.minutes')\nconst secondsEl = document.querySelector('.seconds')\n\nconst timerOn = new Timer ({\n  onTick: updateTimer,\n})\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  daysEl.textContent = String(days).padStart(2, '0')\n  hoursEl.textContent = String(hours).padStart(2, '0')\n  minutesEl.textContent = String(minutes).padStart(2, '0')\n  secondsEl.textContent = String(seconds).padStart(2, '0')\n}\n\nstartBtn.addEventListener('click', timerOn.start.bind(timerOn))\nstartBtn.addEventListener('click', timerOn.stop.bind(timerOn))\n"],"names":["inputEl","startBtn","options","selectedDates","flatpickr","Timer","onTick","milliseconds","iziToast","currentTime","delta","time","ms","days","hours","minutes","seconds","daysEl","hoursEl","minutesEl","secondsEl","timerOn","updateTimer"],"mappings":"+IAOA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,oBAAoB,EAEtDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,CAC7B,CACH,EAEAC,EAAUJ,EAASE,CAAO,EAG1B,MAAMG,CAAM,CACV,YAAY,CAAC,OAAAC,CAAM,EAAG,CACpB,KAAK,OAASA,EACd,KAAK,SAAW,IACjB,CAED,OAAQ,CAEN,MAAMC,EADY,IAAI,KAAKP,EAAQ,KAAK,EACT,QAAS,EACpCO,EAAe,KAAK,MACtBC,EAAS,MAAM,CACb,MAAO,GACP,QAAS,qCACT,MAAO,gBACP,MAAO,OACP,gBAAiB,UACjB,aAAc,OACd,QAAS,0BACT,SAAU,WACV,aAAc,GACd,QAAS,GACjB,CAAO,EAED,KAAK,SAAW,YAAY,IAAM,CAChC,MAAMC,EAAc,KAAK,IAAK,EACxBC,EAAQH,EAAeE,EACvBE,EAAO,KAAK,UAAUD,CAAK,EAEjC,KAAK,OAAOC,CAAI,EAEdD,GAAS,GACb,cAAc,KAAK,QAAQ,CAE1B,EAAE,GAAI,CAEV,CAEC,UAAUE,EAAI,CAQhB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACrC,CACH,CAEA,MAAMC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAU,SAAS,cAAc,QAAQ,EACzCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAY,SAAS,cAAc,UAAU,EAE7CC,EAAU,IAAIhB,EAAO,CACzB,OAAQiB,CACV,CAAC,EAED,SAASA,EAAY,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDC,EAAO,YAAc,OAAOJ,CAAI,EAAE,SAAS,EAAG,GAAG,EACjDK,EAAQ,YAAc,OAAOJ,CAAK,EAAE,SAAS,EAAG,GAAG,EACnDK,EAAU,YAAc,OAAOJ,CAAO,EAAE,SAAS,EAAG,GAAG,EACvDK,EAAU,YAAc,OAAOJ,CAAO,EAAE,SAAS,EAAG,GAAG,CACzD,CAEAf,EAAS,iBAAiB,QAASoB,EAAQ,MAAM,KAAKA,CAAO,CAAC,EAC9DpB,EAAS,iBAAiB,QAASoB,EAAQ,KAAK,KAAKA,CAAO,CAAC"}